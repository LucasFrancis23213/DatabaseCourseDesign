# 最终表以及E-R图的讨论

## 表

### 通知记录表(NotigicationLogs)

| 标签             | 变量类型      | 说明                       |
|------------------|--------------|----------------------------|
| 通知ID           | int          | 唯一标识每个通知的主键。  |
| 用户ID           | int          | 要通知的用户ID，外键，关联到Users表的UserID。|
| 通知类型         | varchar(50)  | 通知的类型，如“物品匹配通知”、“系统通知”等。|
| 发送日期         | DATE     | 通知发送的日期和时间。     |
| 状态             | varchar(20)  | 通知的状态，如已读、未读。|

### 用户行为日志表(UserActivityLogs)

| 标签             | 变量类型      | 说明                                      |
|------------------|--------------|-------------------------------------------|
| 行为日志ID       | int          | 唯一标识每条用户行为记录的主键。          |
| 用户ID           | int          | 行为发起者的用户ID，外键，关联到Users表的UserID。|
| 行为类型         | varchar(50)  | 用户行为的类型，如“登录”、“发布物品”、“评论”等。|
| 发生时间         | DATE     | 行为发生的具体时间。                      |

### 推荐系统日志表(RecommendationLogs)

| 标签             | 变量类型      | 说明                                      |
|------------------|--------------|-------------------------------------------|
| 日志ID           | int          | 唯一标识每条推荐日志记录的主键。          |
| 用户ID           | int          | 接受推荐的用户ID，外键，关联到Users表的UserID。|
| 推荐类别         | varchar(50)  | 推荐的类型。                              |
| 推荐时间         | DATE    | 推荐发生的时间。                          |
| 用户反馈         | varchar(20)  | 用户对推荐内容的反馈，如“有用”、“无用”。 |

### 交易记录表(TransactionLogs)

| 标签                     | 变量类型      | 说明                                                     |
|--------------------------|--------------|----------------------------------------------------------|
| TransactionID (交易ID)   | int          | 主键，唯一标识每笔交易。                                 |
| FromUserID (发起方用户ID)| int          | 发起交易的用户ID，外键，关联到Users表。                  |
| ToUserID (接收方用户ID)  | int          | 接收交易的用户ID，外键，关联到Users表。对于系统收费等情况，此字段可能为空或指向一个特定的系统账户。|
| ItemID (物品ID)          | int          | 交易相关的物品ID，外键，关联到LostItems或FoundItems表。这个字段在某些记录中可能为空。|
| Amount (金额)            | decimal(10,2)| 交易金额。根据交易的性质，这可以是正数（如支付赏金、购买服务）。|
| TransactionType (交易类型)| varchar(50) | 描述交易类型的字符串，如"赏金支付"、"服务购买"、"退款"等。|
| Status (状态)            | varchar(20)  | 交易的当前状态，如"进行中"、"完成"、"失败"等。          |
| TransactionBeginDate (交易开始日期)| TIMESTAMP| 记录交易开始的时间(交易发起，类比淘宝用户付完钱等待收货的状态)。|
| TransactionEndDate (交易完成日期)  | TIMESTAMP| 记录交易完成的时间(交易结束，可能是用户点击确认收获后对应的记录)。|
| Description (描述)       | varchar(255) | 关于交易的额外信息或备注，例如交易的具体目的或原因。    |

***
**注意**： 此处的变量类型为最基本的说明，实际情况需要根据Oracle数据库的特性进行修改。
***

## E-R图设计说明及讨论

### 实体

- 用户(Users)
  - UserID (主键)
  - 其他用户属性如用户名、电子邮件等

- 通知记录(NotificationLogs)
  - NotificationID (主键)
  - UserID (外键)
  - NotificationType
  - SentDate
  - Status

- 用户行为日志(UserActivityLogs)
  - ActivityLogID (主键)
  - UserID (外键)
  - ActivityType
  - Timestamp

- 交易(Transaction)
  - TransactionID (主键)
  - FromUserID (外键)
  - ToUserID (外键)
  - ItemID (外键)
  - Amount
  - TransactionType
  - Status
  - TransactionBeginDate
  - TransactionEndDate
  - Description

### 关系

- 用户(User)与通知记录(NotificationLogs)之间是一对多关系，一个用户可以有多条通知记录，但每条通知记录只属于一个用户。
- 用户(User)与用户行为日志(UserActivityLogs)之间也是一对多关系，一个用户可以有多条行为日志，但每条行为日志只属于一个用户。
- 交易(Transaction)表中的FromUserID和ToUserID与用户(User)表的UserID存在一对多关系，即一个交易中包含一个发起者和一个接收者，但一个用户可以发起多个交易或接收多个交易。
- 交易(Transaction)与物品(Item)之间可能存在一对一或一对多的关系，表示交易涉及的物品。

关系一定会有遗漏的。需要继续讨论。

同样，关系一定会有不符合已有的表的，需要继续讨论。

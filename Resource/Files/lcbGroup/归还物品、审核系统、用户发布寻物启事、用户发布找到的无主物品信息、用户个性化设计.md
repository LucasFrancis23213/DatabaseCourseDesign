# 审核系统

## 需要最终确认的问题：无.

## 前端元素需求：

​	**用户端：**用户端在个人中心内可以查看所有状态的物品，设计一个**筛选器**，可以选择物品的标签、遗失/找回物品、审核状态；显示为**Rejected**的物品在Rejected字样右侧新增一个<u>**修改**</u>按钮，可以让用户直接修改物品相关信息。

​	**管理员端：**应设计一个**管理终端**，其中设置若干按钮（？），比如审核、新增物品、查看日志等等。对于审核，设计两个页面，第一个页面以列表的方式显示所有物品，自动筛选为Pending的物品，显示物品的图片（缩略图）、名称、标签、描述、发布时间、发布用户，设置有三个按钮：<u>**详情、通过、拒绝**</u>，也可以通过筛选器快速筛选其他状态的物品，可以驳回已经**通过**的物品，点击**拒绝**按钮后弹出一个输入框，需要管理员输入**拒绝理由**；第二个页面为点击详情后的页面，显示该物品的所有信息，左上方设置一个**返回**按钮，下方设置四个按钮：上一个、通过、拒绝、下一个。

## 数据表修改：

- 遗失物品表 (LostItems)
  - （更改）<u>**遗失状态**</u>(LostStatus): 物品的状态（如：正在寻找、已找到）。.
  - （新增）**审核状态**(ReviewStatus): 物品的审核状态，外键，关联到ReviewCodes表（新增）的ReviewID
- 找回物品表 (FoundItems)
  - （新增）**审核状态**(ReviewStatus): 物品的审核状态，外键，关联到ReviewCodes表（新增）的ReviewID

- 物品图片表 (ItemImages)：提供物品图片相关信息
  - （新增）**审核状态**(ReviewStatus): 物品的审核状态，外键，关联到ReviewCodes表（新增）的ReviewID
- 物品-标签关联表 (ItemTagLinks)：用于建立物品和标签之间的多对多关系，使得物品可以被多个标签标记。
  - （新增）**审核状态**(ReviewStatus): 物品的审核状态，外键，关联到ReviewCodes表（新增）的ReviewID

## 数据表新增：

+ 审核状态码表 (ReviewCodes)

  + （主码）审核状态ID (ReviewID): 物品的审核状态的ID，便于快速确认物品状态 (00, 01, 99)
  + 审核状态 (ReviewInfo): 物品的审核状态值 (Pending, Approved, Rejected)

+ 物品审核状态关联表 (ItemReviewLinks)

  + （主码）发布时间码：物品发布/提交修改时的时间码，便于标记同一个物品修改时的情况
  + （主码）物品ID：略
  + 图片ID：略
  + 标签ID：略
  + 审核状态ID：略

  > P.S. 管理员实际在审核时修改的是这张表内的审核状态，例如：在上文提到的审核页面中点击“通过”按钮后，实际是修改物品审核状态关联表中的审核ID为01 (Approved)，审核管理员并没有对总表的写权限，设计一个触发器，当这张表中的审核ID被修改后，物品表、物品图片表、物品-标签关联表中的状态自动修改。

## 流程图

### 用户侧：

![image-20240426093130623](..\..\Images\lcbGroup\image-20240426093130623.png)

### 审核管理员侧：

![image-20240426100413064](..\..\Images\lcbGroup\image-20240426100413064.png)





# 归还物品

## 待商榷部分最终结果

+ 物品归还协议表：协议内容每一个都是一样的，不需要放在表格中，但是已阅读或者没阅读的状态可以放在表里。

+ 物品交换表：可以加入用钱购买物品而不只是以物易物（需要链接到外部平台）

## 需要的前端元素：

+ 按钮：点击“这是我的物品”按钮

+ 网页：跳转到“物品确认”界面

  + 首先进行系统自动匹配----->流程状态变更

  + 自动匹配失败则失主进行相关信息回答（如在何处丢失，里面有什么东西等），由捡到物品者审核---->流程状态变更

+ 网页：审核通过则跳转到“物品归还”界面
  + 阅读物品归还协议（可以做成网页或弹窗）----->阅读状态变更
  + 双方进行协议状态确认---->协议状态变更

+ 网页：审核不通过或长期无人认领状态或者失主不要了，可跳转到“商品市场”

  + 用户可以通过导航栏或者跳转进入

  + 可以查找需要的东西导航栏

+ 网页：双方确认归还或者已经卖/交换出，后跳转回物品主界面
  + 失物招领流程结束，物品下架，不在推送变成灰色---->处理状态变更

## 流程图

![image-20240426101059614](..\..\Images\lcbGroup\image-20240426101059614.png)



# 用户个性化设计部分：

## 待商榷部分最终结果：

+  偏好类型表：关联订阅表

+ 订阅ID：先不去掉了

+ 用户订阅表中的订阅类型：做成一个表，然后外码关联

## 需要的前端元素

+ 按钮：导航栏需要一个特定的“用户”按钮

+ 按钮：在主界面进行一个“用户个性化”按钮

+ 网页：点击则跳转到“我的偏好”界面

  + 可以选择偏好类型表中的所有信息（都做成按钮）

  + 可以选择订阅状态表中的所有信息（都做成按钮）

## 流程图

<img src="..\..\Images\lcbGroup\image-20240426101610593.png" alt="image-20240426101610593" style="zoom:50%;" />  
  
![image-20240426101646163](..\..\Images\lcbGroup\image-20240426101646163.png)  





# 发布寻物启事
## 需要的前端元素

a、按钮：用户点击进入发布寻物启事的页面。
b、表单：用户进入发布寻物启事的页面后，出现一个表单，用户填写物品名称（文本框）、类别（选择，下拉菜单）、描述（文本框）、遗失地点（文本框），遗失日期（下拉菜单选择日期），选择标签（多选按钮），系统审核这张表单，如果通过填写下一张，否则重新填写。
c、表单：用户在这张表单添加图片（点击图片框添加图片），输入描述（文本框），系统审核这张表单，如果通过填写下一张，否则重新填写。
d、表单：用户选择是否赏金（单选按钮），根据用户选择决定接下来的内容，选择否，接下来是一个提交按钮，用户点击按钮，系统审核这张表单，如果通过提示填写完成，否则重新填写。
选择是，接下来是一个表单，用户输入悬赏金额（文本框），截止日期（下拉菜单），接下来是一个提交按钮，用户点击按钮，系统审核这张表单，如果通过提示填写完成，否则重新填写。

## 流程图

![image-20240427000255445](..\..\Images\lcbGroup\image-20240427000255445.png)



# 发布无主物品信息：
## 需要的前端元素

a、按钮：用户点击进入发布发布无主物品信息的页面。
b、表单：用户进入发布发布无主物品信息的页面后，出现一个表单，用户填写物品名称（文本框）、类别（选择，下拉菜单）、描述（文本框）、找到地点（文本框），找到日期（下拉菜单选择日期），选择标签（多选按钮），系统审核这张表单，如果通过填写下一张，否则重新填写。
c、表单：用户在这张表单添加图片（点击图片框添加图片），输入描述（文本框），接下来是一个提交按钮，用户点击按钮，系统审核这张表单，如果通过提示填写完成，否则重新填写。

## 流程图

![image-20240427000132135](..\..\Images\lcbGroup\image-20240427000132135.png)
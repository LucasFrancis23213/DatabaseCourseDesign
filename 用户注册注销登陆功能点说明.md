# zyn组
## 前端说明  
### 功能点设计  
- 主页登录按钮设计  
- 主页注册界面设计
- 登录窗口设计  
- 个人主页设计  
### 具体实现
#### home文件夹  
修改了home主页中关于登录按钮的相关设计  
#### login文件夹  
设计了登录界面框，包括登录，注册，关闭等相关功能  

#### signUp文件夹  

设计了注册界面框，包括输入用户名、自定义密码、输入联系方式等相关功能

#### personal文件夹  
设计了个人主页的相关显示，包括个人用户名与id显示，加入了实名认证的相关功能，修复了右上角按钮对于主页跳转不正确的问题  

### 修改说明

#### store/account.ts

修改了account.ts中的login函数、logout函数、profile函数，增加了deleteUser函数，使其可以正确与数据库连接并调用接口

### store/index.ts

增加了pinia-plugin-persistedstate，实现了持久化，保证页面刷新不会影响已有数据

### router/routes.ts

增加了/signup路由

#### App.vue

修改了退出登录后跳转的页面，解决了推出后重新登录，登录界面框异常跳出的问题

去掉了页面初始化时的更新user.name部分，更改了user.name的获取方式，保证实时更新


## 后端说明

### DAL层

- UserOperatorDAL是用来操作Users表的内容，负责与数据库连接，提供了增删查的功能，对应了三个接口GetUserInfo, DeleteUser, InsertUser

### BLL层
- BLL层与此部分的四个功能(获取用户信息、用户登录、用户注册、用户注销)一一对应，以DAL层为基础提供了业务逻辑的具体实现。分别在DeleteUserBLL.cs, GetUserInfoBLL.cs, RegisterBLL.cs, UserLoginBLL.cs 中实现。

### API层
- 负责调用BLL层的内容来负责和前端交互，提供了四个接口，分别为CheckPassword, DeleeteUser, GetUserInfo, Register，前端可以调用这四个接口来获取信息或者对数据库进行操作。接口具体信息在之后说明。

## 接口具体信息

### BasicSQLOps

#### Utilities文件夹

- UserAccessibleInfo类
  - 参数：UserID(用户ID)，UserName(用户名)，Contact(联系方式)
  - 用途：主页展示信息的数据结构

- RegisterUtil类
  - 参数：UserName(用户名)，Password(密码)，Contact(联系方式)
  - 用途：用户注册信息传递的数据结构

#### BusinessLogicLayer文件夹

- DeleteUserBLL类
  - 成员变量
    - UserOperatorDAL(UserOperatorDAL类): 与数据库连通的工具类
  - DeleteUser方法
    - 传入参数：UserName(string)
    - 功能：从Users表中删除用户名为UserName的用户
    - 返回值类型：`Tuple<bool, string>`

- GetUserInfoBLL类
  - 成员变量
    - UserOperatorDAL (UserOperatorDAL类): 与数据库连通的工具类
  - GetInfo方法
    - 传入参数：UserName (string)
    - 功能：根据用户名获取用户信息
    - 返回值类型：`Tuple<bool, UserAccessibleInfo, string>`
      - 第一元素(bool): 操作是否成功
      - 第二元素(UserAccessibleInfo): 用户可访问的信息，包括用户名、用户ID和联系方式
      - 第三元素(string): 若操作失败，返回错误信息

- RegisterBLL类
  - 成员变量
    - UserOperatorDAL (UserOperatorDAL类): 与数据库连通的工具类
  - InsertUser方法
    - 传入参数：user (Users类)
    - 功能：在数据库中插入一个新用户
    - 返回值类型：`Tuple<bool, string>`
      - 第一元素(bool): 操作是否成功
      - 第二元素(string): 操作成功或失败的详细信息

- UserLoginBLL类
  - 成员变量
    - UserOperatorDAL (UserOperatorDAL类): 与数据库连通的工具类
  - CheckPassword方法
    - 传入参数：UserName (string), Password (string)
    - 功能：检查给定用户名的密码是否匹配
    - 返回值类型：`Tuple<bool, string>`
      - 第一元素(bool): 操作是否成功
      - 第二元素(string): 操作成功或失败的详细信息

#### DataAccessLayer文件夹

- UserOperatorDAL类
  - 成员变量
    - BasicSQLOps (BasicSQLOps类): 基础SQL操作类
    - conn (Connection类): 数据库连接类
    - OracleConnection (OracleConnection类): Oracle数据库连接对象
    - Uid (string): 数据库用户名
    - Password (string): 数据库密码
    - DataSource (string): 数据源信息
  - GetUserInfo方法
    - 传入参数：UserName (string)
    - 功能：获取指定用户名的用户信息
    - 返回值类型：`Tuple<bool, string>`
      - 第一元素(bool): 操作是否成功
      - 第二元素(string): 查询结果或错误信息
  - DeleteUser方法
    - 传入参数：UserName (string)
    - 功能：删除指定用户名的用户
    - 返回值类型：`Tuple<bool, string>`
      - 第一元素(bool): 操作是否成功
      - 第二元素(string): 删除结果或错误信息
  - InsertUser方法
    - 传入参数： 
      - UserName (string)
      - Password (string)
      - Contact (string)
    - 功能：在数据库中插入新用户
    - 返回值类型：`Tuple<bool, string>`
      - 第一元素(bool): 操作是否成功
      - 第二元素(string): 插入结果或错误信息

### WebAppTest

#### APILayer文件夹

- CheckPasswordController类：
  - CheckPassword方法：
    - 路由名称：/api/CheckPassword
    - http方法：[HttpGet]
    - 传入参数：UserName (string), Password (string)
    - 功能：验证数据库中用户的用户名和密码是否匹配

- DeleteUserController类：
  - CheckPassword方法：
    - 路由名称：DeleteUser
    - http方法：[HttpGet]
    - 传入参数：UserName (string)
    - 功能：从数据库中删除指定用户名的用户

- GetUserInfoController类：
  - CheckPassword方法：
    - 路由名称：GetUserInfo
    - http方法：[HttpGet]
    - 传入参数：UserName (string)
    - 功能：获取数据库中指定用户名的用户信息

- RegisterController类：
  - InsertUser方法：
    - 路由名称：Register
    - http方法：[HttpPost]
    - 传入参数：user (RegisterUtil 类型，通过请求体传入)
    - 功能：在数据库中创建一个新用户，验证输入数据的完整性并转换为用户对象进行数据库插入操作。
